@model Devoiture.ViewModel.Thuexe_VM
@{
}
<!-- Detail Start -->
<div class="container-fluid pt-5">
    <div class="container pt-5">
        <div class="row">
            <div class="col-lg-8 mb-5">
                <h1 class="display-4 text-uppercase mb-5">@Model.CarModel</h1>
                <div class="row mx-n2 mb-3">
                    <!-- Hình ảnh chính từ Xe -->
                    <div class="col-12 px-2 pb-2">
                        <img class="img-fluid w-100" src="~/images/Xe/@Model.Hinhanh" alt="">
                    </div>
                </div>
                <div class="row mx-n2 mb-3">
                    <!-- Các hình ảnh từ bảng HinhAnhXe -->
                    @foreach (var hinh in Model.HinhAnhList)
                    {
                        <div class="col-md-3 col-6 px-2 pb-2">
                            <div class="d-flex align-items-center justify-content-center h-100">
                                <img class="img-fluid img-thumbnail" src="~/images/Xe/@hinh" alt="" style="max-height: 100px;">
                            </div>
                        </div>
                    }
                </div>
                <p>@Model.MotaDacDiemChucNang</p>
                <div class="row pt-2">
                    <div class="col-md-3 col-6 mb-2">
                        <i class="fa fa-calendar text-primary mr-2"></i>
                        <span>Năm SX: @Model.NamSx</span>
                    </div>
                    <div class="col-md-3 col-6 mb-2">
                        <i class="fa fa-chair text-primary mr-2"></i>
                        <span>Số ghế: @Model.Soghe</span>
                    </div>
                    <div class="col-md-3 col-6 mb-2">
                        <i class="fa fa-tachometer-alt text-primary mr-2"></i>
                        <span>Mức tiêu thụ: @Model.Muctieuthunhienlieu km/liter</span>
                    </div>
                    <div class="col-md-3 col-6 mb-2">
                        <i class="fa fa-gas-pump text-primary mr-2"></i>
                        <span>Loại nhiên liệu: @Model.Loainhienlieu</span>
                    </div>
                </div>
                <div class="row pt-2">
                    <div class="col-12 mb-2">
                        <i class="fa fa-map-marker-alt text-primary mr-2"></i>
                        <span>Địa chỉ xe: @Model.Diachixe</span>
                    </div>
                    <div class="col-12 mb-2">
                        <i class="fa fa-file-alt text-primary mr-2"></i>
                        <span>Điều khoản thuê xe của chủ xe: @Model.Dieukhoanthuexe</span>
                    </div>
                </div>
            </div>

            <div class="col-lg-4 mb-5">
                <div class="bg-secondary p-5 mx-auto" style="overflow: auto;">
                    <h3 class="text-primary text-center mb-4">Check Availability</h3>
                    <h6 class="text-primary text-center mb-4 font-weight-bold display-4" style="white-space: nowrap;">@Model.Giathue đ</h6>
                    <div class="form-group">
                        <label for="pickupLocation">Địa chỉ nhận xe</label>
                        <input id="pickupLocation" type="text" class="form-control px-4" style="height: 50px;" placeholder="Enter Pickup Location" />
                    </div>
                    <div class="form-group">
                        <label for="pickupDate">Ngày nhận xe</label>
                        <div class="date" id="date1" data-target-input="nearest">
                            <input asp-for="Ngaynhanxe" id="pickupDate" type="text" class="form-control p-4 datetimepicker-input" placeholder="Pickup Date"
                                   data-target="#date1" data-toggle="datetimepicker" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="dropDate">Ngày trả xe</label>
                        <div class="date" id="date2" data-target-input="nearest">
                            <input asp-for="Ngaytraxe" id="dropDate" type="text" class="form-control p-4 datetimepicker-input" placeholder="Drop Date"
                                   data-target="#date2" data-toggle="datetimepicker" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Đơn giá thuê: </label>
                        <input asp-for="Dongiathue" type="text" class="form-control" id="rentalPrice" />
                    </div>
                    <div class="form-group">
                        <label>Bảo hiểm thuê xe: </label>
                        <input asp-for="Baohiemthuexe" type="text" class="form-control" />
                    </div>
                    <div class="form-group">
                        <label>Tổng tiền thuê xe: </label>
                        <input asp-for="Tongtienthue" type="text" class="form-control" />
                    </div>
                    <div class="form-group mb-0">
                        <button id="checkAvailabilityButton" class="btn btn-primary btn-block" type="button" style="height: 50px;">Check Now</button>
                    </div>
                    <div class="mt-3">
                        <p id="rentalPrice"></p>
                        <p id="insurancePrice"></p>
                        <p id="totalPrice"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Detail End -->
<script>
    // Định dạng ngày tháng
    $('#date1').datetimepicker({
        format: 'L'
    });
    $('#date2').datetimepicker({
        format: 'L'
    });

    // Lắng nghe sự kiện click vào nút "Check Now"
    $('#checkAvailabilityButton').click(function () {
        // Lấy thông tin ngày nhận và trả xe
        var pickupDate = $('#pickupDate').val();
        var dropDate = $('#dropDate').val();

        // Lấy giá thuê từ bảng xe (đơn giá thuê tương ứng với biển số xe đã chọn)
        var rentalPrice = 100; // Giả sử giá thuê là 100 đơn vị (được lấy từ cơ sở dữ liệu hoặc tính toán khác)

        // Tính số ngày thuê
        var startDate = new Date(pickupDate);
        var endDate = new Date(dropDate);
        var rentalDays = Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24));

        // Tính đơn giá thuê và bảo hiểm thuê xe
        var rentalFee = rentalDays * rentalPrice;
        var insuranceFee = 0.09843205574912892 * rentalFee; // Bảo hiểm thuê xe là 9.843205574912892% của đơn gi
</script>